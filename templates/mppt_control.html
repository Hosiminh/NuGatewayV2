<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nu Gateway - MPPT Kontrol</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            display: flex;
        }
        .sidebar {
            width: 250px; background: #003366; color: white;
            display: flex; flex-direction: column;
            position: fixed; height: 100vh; left: 0; top: 0;
        }
        .logo { padding: 20px; background: #002244; display: flex; align-items: center; gap: 10px; }
        .logo-icon { width: 30px; height: 30px; background: #4A90E2; border-radius: 5px; }
        .logo-text { font-size: 18px; font-weight: bold; }
        .nav-menu { flex: 1; padding: 20px 0; }
        .nav-item {
            padding: 15px 25px; color: #ccc; text-decoration: none;
            display: block; transition: all 0.3s; cursor: pointer;
        }
        .nav-item:hover { background: #004477; color: white; }
        .nav-item.active { background: #0066cc; color: white; border-left: 4px solid #4A90E2; }
        .main-content { margin-left: 250px; flex: 1; display: flex; flex-direction: column; min-height: 100vh; }
        .header {
            background: white; padding: 20px 30px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex; justify-content: space-between; align-items: center;
        }
        .header h1 { color: #003366; font-size: 24px; }
        .user-info { display: flex; align-items: center; gap: 15px; }
        .user-avatar {
            width: 40px; height: 40px; border-radius: 50%; background: #4A90E2;
            display: flex; align-items: center; justify-content: center; color: white;
        }
        .content-area {
            flex: 1; padding: 30px;
            display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px; align-content: start;
        }
        .control-card {
            background: white; border-radius: 8px; padding: 25px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .control-card h3 {
            color: #003366; margin-bottom: 20px; padding-bottom: 10px;
            border-bottom: 2px solid #4A90E2;
        }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; color: #333; font-weight: 500; }
        .form-group input[type="range"] {
            width: 100%; height: 8px; border-radius: 5px; background: #ddd;
            outline: none; -webkit-appearance: none;
        }
        .form-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none; appearance: none;
            width: 20px; height: 20px; border-radius: 50%;
            background: #4A90E2; cursor: pointer;
        }
        .slider-value {
            text-align: center; font-size: 24px; font-weight: bold;
            color: #4A90E2; margin: 15px 0;
        }
        .form-group input[type="date"],
        .form-group input[type="time"],
        .form-group input[type="number"],
        .form-group select {
            width: 100%; padding: 10px; border: 1px solid #ddd;
            border-radius: 4px; font-size: 14px;
        }
        .btn {
            width: 100%; padding: 12px; border: none; border-radius: 4px;
            font-size: 14px; font-weight: 500; cursor: pointer; transition: all 0.3s;
        }
        .btn-primary { background: #4A90E2; color: white; }
        .btn-primary:hover { background: #357ABD; }
        .btn-success { background: #28a745; color: white; }
        .btn-success:hover { background: #218838; }
        .button-group { display: flex; gap: 10px; }
        .button-group .btn { flex: 1; }
        .timer-note {
            background: #f8f9fa; padding: 10px; border-radius: 4px;
            font-size: 13px; color: #666; margin-top: 10px;
        }
        .quick-actions { grid-column: 1 / -1; }
        .action-buttons {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px; margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <div class="logo">
            <div class="logo-icon"></div>
            <div class="logo-text">Nu Gateway</div>
        </div>
        <nav class="nav-menu">
            <a href="/dashboard" class="nav-item">Dashboard</a>
            <a href="/devices" class="nav-item">Cihazlar</a>
            <a href="/mppt_control" class="nav-item active">MPPT Kontrol</a>
            <a href="/relay_control" class="nav-item">Röle Kontrol</a>
            <a href="/automation" class="nav-item">Alarm & Otomasyon</a>
            <a href="/settings" class="nav-item">Ayarlar</a>
        </nav>
    </div>

    <div class="main-content">
        <div class="header">
            <h1>MPPT Kontrol</h1>
            <div class="user-info">
                <span>Cafer DOĞANAY</span>
                <div class="user-avatar">CD</div>
            </div>
        </div>

        <div class="content-area">
            <div class="control-card">
                <h3>Işık Parlaklık Ayarla (Dimming)</h3>
                <div class="form-group">
                    <input type="range" id="dimSlider" min="0" max="100" value="50">
                    <div class="slider-value" id="dimValue">50%</div>
                </div>
                <button class="btn btn-primary" onclick="setDimming()">Parlaklığı Ayarla</button>
            </div>

            <div class="control-card">
                <h3>Saat Ayarla (RTC)</h3>
                <div class="form-group">
                    <label>Tarih</label>
                    <input type="date" id="rtcDate">
                </div>
                <div class="form-group">
                    <label>Saat</label>
                    <input type="time" id="rtcTime">
                </div>
                <div class="button-group">
                    <button class="btn btn-primary" onclick="setRTC()">Saati Ayarla</button>
                    <button class="btn btn-success" onclick="syncRTC()">Sistem Saati ile Senkronize</button>
                </div>
            </div>

            <div class="control-card">
                <h3>Timer Ayarları</h3>
                <div class="form-group">
                    <label>Timer 1 - Süre (dakika)</label>
                    <select id="timer1Duration">
                        <option value="0">0 (Kapalı)</option>
                        <option value="30">30</option>
                        <option value="60">60</option>
                        <option value="90">90</option>
                        <option value="120">120</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Timer 1 - Parlaklık (%)</label>
                    <input type="number" id="timer1Dim" min="0" max="100" value="50">
                </div>
                <button class="btn btn-primary" onclick="saveTimer()">Timer'ı Kaydet</button>
                <div class="timer-note">
                    <strong>Not:</strong> Timer ayarları için detaylı register yazılımı yakında eklenecek.
                </div>
            </div>

            <div class="control-card quick-actions">
                <h3>Hızlı Aksiyonlar</h3>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="setDimmingValue(0)">Kapat (0%)</button>
                    <button class="btn btn-primary" onclick="setDimmingValue(30)">Düşük (30%)</button>
                    <button class="btn btn-primary" onclick="setDimmingValue(50)">Orta (50%)</button>
                    <button class="btn btn-primary" onclick="setDimmingValue(100)">Maksimum (100%)</button>
                </div>
            </div>
        </div>

        <div id="footer-container"></div>
    </div>

    <script src="/statics/footer-loader.js"></script>
    <script>
        const dimSlider = document.getElementById('dimSlider');
        const dimValue = document.getElementById('dimValue');
        dimSlider.addEventListener('input', function() {
            dimValue.textContent = this.value + '%';
        });
        function setDimming() {
            alert('Parlaklık ' + dimSlider.value + '% olarak ayarlandı');
        }
        function setDimmingValue(value) {
            dimSlider.value = value;
            dimValue.textContent = value + '%';
            setDimming();
        }
        function setRTC() {
            alert('Saat ayarlandı: ' + document.getElementById('rtcDate').value + ' ' + document.getElementById('rtcTime').value);
        }
        function syncRTC() {
            const now = new Date();
            document.getElementById('rtcDate').value = now.toISOString().split('T')[0];
            document.getElementById('rtcTime').value = now.toTimeString().split(' ')[0].substring(0, 5);
            alert('Sistem saati ile senkronize edildi');
        }
        function saveTimer() {
            alert('Timer ayarları kaydedildi');
        }
        window.onload = function() {
            const now = new Date();
            document.getElementById('rtcDate').value = now.toISOString().split('T')[0];
            document.getElementById('rtcTime').value = now.toTimeString().split(' ')[0].substring(0, 5);
        };
    </script>
</body>
</html>